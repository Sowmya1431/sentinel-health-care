<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Sentinel Health Account</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body {
      background: #f3f3f3;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .background {
      background: url("hospital_bg.jpg") no-repeat center center/cover;
      position: absolute; inset: 0;
      filter: blur(6px);
      opacity: 0.7;
      z-index: -1;
    }
    .signup-container { width: 100%; display:flex; justify-content:center; padding: 40px; }
    .signup-card {
      background: #fff; width: 420px; border-radius: 14px; padding: 35px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: left;
    }
    .signup-card h2 { font-size: 22px; font-weight: 700; margin-bottom: 8px; }
    .subtitle { font-size: 14px; color: #666; margin-bottom: 18px; }
    label { font-size: 14px; font-weight: 600; margin-top: 12px; display:block; }
    input, select {
      width:100%; padding:11px; margin-top:6px; border-radius:6px; border:1px solid #ccc; font-size:14px;
    }
    .btn {
      width:100%; margin-top:22px; padding:12px; background:#4B0082; color:white; border:none; border-radius:6px;
      font-size:15px; cursor:pointer;
    }
    .btn:hover { opacity: 0.92; }
    .signin-text { text-align:center; margin-top:14px; color:#555; font-size:14px; }
    .signin-text a { color:#4B0082; text-decoration:none; font-weight:700; }

    /* error / flash styles */
    .error { background:#ffefef; color:#b00000; padding:10px; border-left:4px solid #b00000; border-radius:6px; margin-bottom:12px; }
    .flash { background:#eef8ff; color:#054a91; padding:10px; border-left:4px solid #1e90ff; border-radius:6px; margin-bottom:12px; }
  </style>
</head>
<body>

  <div class="background" aria-hidden="true"></div>

  <div class="signup-container">
    <!-- IMPORTANT: method + action set to /register POST -->
    <form class="signup-card" action="{{ url_for('register_page') }}" method="POST" novalidate>
      <h2>Create Your Sentinel Health Account</h2>
      <p class="subtitle">Join Sentinel Health to enhance patient monitoring and safety.</p>

      <!-- flashed success message (optional) -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="flash">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- inline error -->
      {% if error %}
        <div class="error" role="alert">{{ error }}</div>
      {% endif %}

      <label for="username">User Name</label>
      <input id="username" name="username" type="text" placeholder="John Doe" required
             value="{{ form.username | default('') }}">

      <label for="email">Email</label>
      <input id="email" name="email" type="email" placeholder="john.doe@hospital.com" required
             value="{{ form.email | default('') }}">

      <label for="password">Password</label>
      <input id="password" name="password" type="password" placeholder="********" required>

      <label for="role">Role Selection</label>
      <select id="role" name="role" required>
        <option value="">Select your role</option>
        <option value="Doctor" {% if form.role == 'Doctor' %}selected{% endif %}>Doctor</option>
        <option value="Nurse" {% if form.role == 'Nurse' %}selected{% endif %}>Nurse</option>
      </select>

      <label for="hospital_id">Hospital ID (Fixed)</label>
      <input id="hospital_id" name="hospital_id" type="text" placeholder="HSID-12345" required
             value="{{ form.hospital_id | default('') }}">

    <button class="btn" type="submit">Sign Up</button>

    <p class="signin-text">Already have an account? <a href="{{ url_for('login_page') }}">Sign in</a></p>
    </form>
</div>

</body>
</html>
